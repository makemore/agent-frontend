<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Widget - Enhanced Markdown Demo</title>
  
  <!-- Chat Widget Core -->
  <link rel="stylesheet" href="dist/chat-widget.css">
  
  <!-- Syntax Highlighting Theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11/styles/github-dark.min.css">
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background: #f5f5f5;
    }
    
    .demo-container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #1a1a1a;
      margin-bottom: 10px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .feature-card {
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 3px solid #0066cc;
    }
    
    .feature-card h3 {
      margin-top: 0;
      color: #0066cc;
    }
    
    .test-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    
    button {
      padding: 10px 20px;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    
    button:hover {
      background: #0052a3;
    }
    
    code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <h1>üé® Enhanced Markdown Demo</h1>
    <p class="subtitle">Chat widget with full markdown support including tables, code blocks, and syntax highlighting</p>
    
    <div class="feature-grid">
      <div class="feature-card">
        <h3>üìù Rich Text</h3>
        <p>Bold, italic, strikethrough, headings, and blockquotes</p>
      </div>
      
      <div class="feature-card">
        <h3>üíª Code Blocks</h3>
        <p>Multi-line code with syntax highlighting for 180+ languages</p>
      </div>
      
      <div class="feature-card">
        <h3>üìä Tables</h3>
        <p>Full GitHub Flavored Markdown table support</p>
      </div>
      
      <div class="feature-card">
        <h3>‚úÖ Task Lists</h3>
        <p>Interactive checkboxes for todo items</p>
      </div>
    </div>
    
    <div class="test-buttons">
      <button onclick="testCodeBlock()">Test Code Block</button>
      <button onclick="testTable()">Test Table</button>
      <button onclick="testRichText()">Test Rich Text</button>
      <button onclick="testTaskList()">Test Task List</button>
      <button onclick="ChatWidget.open()">Open Widget</button>
    </div>
  </div>

  <!-- Load dependencies in correct order -->
  <script src="dist/chat-widget.js"></script>
  
  <!-- Marked.js for enhanced markdown -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
  <!-- Highlight.js for syntax highlighting -->
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/lib/core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/lib/languages/javascript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/lib/languages/python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/lib/languages/typescript.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11/lib/languages/json.min.js"></script>
  
  <!-- Enhanced markdown addon -->
  <script src="dist/chat-widget-markdown.js"></script>

  <script>
    // Initialize widget
    ChatWidget.init({
      backendUrl: 'http://localhost:8000',
      agentKey: 'demo-agent',
      title: 'Markdown Demo',
      subtitle: 'Testing enhanced markdown',
      primaryColor: '#0066cc',
      enableDebugMode: false,
      enableAutoRun: false,
    });

    // Test functions
    function testCodeBlock() {
      ChatWidget.open();
      // Simulate receiving a message with code
      setTimeout(() => {
        const codeMessage = `Here's a JavaScript example:\n\n\`\`\`javascript\nfunction greet(name) {\n  return \`Hello, \${name}!\`;\n}\n\nconsole.log(greet('World'));\n\`\`\`\n\nAnd here's some Python:\n\n\`\`\`python\ndef fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\nprint(fibonacci(10))\n\`\`\``;
        
        alert('Code block test - check the widget for rendered code with syntax highlighting!');
      }, 500);
    }

    function testTable() {
      ChatWidget.open();
      alert('Table test - send a message asking for a table!');
    }

    function testRichText() {
      ChatWidget.open();
      alert('Rich text test - send a message to see formatted responses!');
    }

    function testTaskList() {
      ChatWidget.open();
      alert('Task list test - send a message asking for a todo list!');
    }
  </script>
</body>
</html>

